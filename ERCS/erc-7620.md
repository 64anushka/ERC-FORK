---
eip: 7620
title: Pre-Authorized Service Payment Protocol
description: A protocol for automated, pre-approved ERC-20 deductions by authorized providers, improving DApp transaction efficiency.
author: Chen Liaoyuan (@bizliaoyuan) <bizliaoyuan@gmail.com>
discussions-to: https://ethereum-magicians.org/t/eip-7620-pre-authorized-service-payment-protocol/18586
status: Draft
type: Standards Track
category: ERC
created: 2024-02-10
requires: 20
---

## Abstract

This EIP proposes a decentralized mechanism for users to pre-authorize specific service providers to deduct funds from their accounts without requiring explicit approval for each transaction. It aims to improve transaction efficiency and user experience in DApps and services by defining a smart contract interface that allows users to safely pre-authorize [ERC-20](./eip-20.md) token transfers to registered service providers. Utilizing this protocol, a decentralized registry of service providers can be created, where providers can register and deregister themselves, and users can dynamically grant and revoke authorizations based on trust.

## Motivation

In the current Ethereum ecosystem, users need to confirm every transaction when transferring funds to third parties, which can be inconvenient, especially for services requiring frequent micro-payments. By implementing a decentralized Pre-Authorized Service Payment Protocol, this process can be significantly streamlined while retaining full control for users over their funds.

## Specification

The protocol defines the `IERC7620` interface to facilitate the following key functionalities:

- `registerServiceProvider(address serviceProvider)`: Allows service providers to register themselves.
- `deregisterServiceProvider(address serviceProvider)`: Allows service providers to deregister themselves.
- `authorizeServiceProvider(address serviceProvider, uint256 amount)`: Allows users to pre-authorize a specified amount of tokens to a service provider.
- `revokeAuthorization(address serviceProvider)`: Allows users to revoke the pre-authorization given to a service provider.
- `deductFunds(address user, uint256 amount, string memory referenceId)`: Enables service providers to deduct funds from a user's account based on the authorization. The `referenceId` facilitates transaction tracking and reconciliation.
- `authorizedAmount(address user, address serviceProvider) external view returns (uint256)`: Queries the current authorized amount a user has allocated to a service provider.
- `isServiceProviderRegistered(address serviceProvider) external view returns (bool)`: Checks if a service provider is registered and authorized to deduct funds.

## Rationale

The Pre-Authorized Service Payment Protocol is designed to enhance the efficiency and security of transactions between users and service providers on the Ethereum blockchain. It reduces the need for repeated transaction approvals, streamlining the payment process for services that require frequent or recurring payments.

## Reference Implementation

See [`ERC7620.sol`](../assets/eip-7620/contracts/ERC7620.sol).

## Security Considerations

The protocol includes several security measures to ensure the safety of user funds and the integrity of service provider transactions. These include checks for service provider registration, user authorization levels, and transaction limits. It's crucial that implementations of this protocol enforce these security checks rigorously to prevent unauthorized fund deductions and to protect against potential abuses.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
